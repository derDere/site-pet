<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
    <title>Site Pet</title>
  </head>
  <body>
    <input id="testyourown" class="hidden" type="file" accept="image/png, image/gif" />
    <center>
      <h1>Site Pet</h1>
      Repository: <a target="_blank" href="https://github.com/derDere/site-pet/">Site Pet</a><br><br>
      Sprite:
      <select id="dev-select">
        <option>sprite</option>
        <option selected>example</option>
      </select>
      <span id="cred"></span>
      <br><br>
      <span style="font-size:12px;">This a demo of the Site-Pet project. Feel free to browse the current sprites or test your own sprite. You can click on the pet to pat it.</span>
      <br><br>
      <button onclick="uploadYourOwn();">Test your own sprite</button>
      <br><br>
      <a target="_blank" href="SpritePrefap_Layout.png">Sprite Layout</a>
      <br><br>
      <span id="fc-42122"></span>
    </center>

    <script src="site-pet.js"></script>
    <script>
      const ele = createSitePet();
      const input_testyourown = document.getElementById('testyourown');

      const cred = document.getElementById('cred');
      const credits = {
        "sprite": ["derDere", "https://github.com/derDere/"],
        "example": ["derDere", "https://github.com/derDere/"],
      };

      function uploadYourOwn() {
        input_testyourown.click();
      }
      input_testyourown.addEventListener('change', function(event) {
        var file = event.target.files[0];
        var reader = new FileReader();
        reader.onload = function(event) {
          let sel = document.getElementById('dev-select');
          sel.value = "";
          ele.style.backgroundImage = 'url(' + event.target.result + ')';
        };
        reader.readAsDataURL(file);
      });

      setInterval(function() {
        let sel = document.getElementById('dev-select');
        if (sel.value == '') {
          return;
        }
        input_testyourown.value = "";
        let bg = sel.value;
        ele.style.backgroundImage = `url(gfx/${bg}.png)`;

        let [name, url] = credits[bg];

        let html;
        if (url) {
          html = `Credits for this sprite go to: <a target="_blank" href="${url}">${name}</a>`;
        } else {
          html = `Credits for this sprite go to: ${name}`;
        }
        cred.innerHTML = html;
      }, 500);
    </script>

    <script>
    var fcr = Math.floor(Math.random()*99999999999);
    var _fcc = _fcc || []; _fcc.push(["42122"]); _fcc.push(["blue"]);(function(){
    var fc = document.createElement("script");fc.async = true;
    fc.src = "https://www.imcounter.com/fcount.php?rnd=" + fcr;
    var sc = document.getElementById("fc-42122");
    sc.appendChild(fc);
    })();</script>
    <noscript>
    <a href="https://www.imcounter.com/stats/42122/dashboard" rel="nofollow" target="_blank" title="Besucherz&auml;hler"><img src="https://www.imcounter.com/fcounter.php?id=42122;" alt="Besucherz&auml;hler" title="Besucherz&auml;hler"></a>
    </noscript>
  </body>
</html>
